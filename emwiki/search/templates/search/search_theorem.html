{% extends 'base.html' %}

{% load static %}
{% block head %}
{{ query_text|json_script:"query_text" }}
{{ context_for_js|json_script:"context" }}
<script src="{% static 'search/JavaScript/search_theorem.js' %}"></script>

{% endblock %}


{% block content %}
<div class='w-100 m-3'>

  <div class="container-fluid">

    <form class="form-inline mx-auto" action='{% url "search:search_theorem" %}' method='get'>
      <div class='form-row w-100 mt-4 px-5 mb-3 mx-auto'>
        <textarea id='search-theorem' class="form-control px-3 col-10" type="search" placeholder='Search Theorem and Definition' name='search_query' value='{{ query_text }}'>{{ query_text }}</textarea>
        <span class='col-1'>
          <button class="btn btn-outline-success" type="submit">Search</button>
        </span>
      </div>

      <div class="d-flex my-box-light col-10">

        <div class="my-box mr-auto ml-5 my-2 mr-2 pl-3 col-1 text-secondary">
          {{ result_list|length }}results
        </div>
        <!--
        <div class="my-box my-2 mx-0 px-0 col-sm-2">
          <span class="float-right px-0">Sort by :</span> 
        </div>
        <div class="my-box dropdown col-5 col-sm-4 col-md-3 col-lg-2">
          <button type="button" id="dropdown1"
              class="btn btn-info dropdown-toggle w-100"
              data-toggle="dropdown"
              aria-haspopup="true"
              aria-expanded="true">
              <span class="w-50">{{ order_by }} </span>
          </button>
          <div class="dropdown-menu" aria-labelledby="dropdownMenu">
            <li><button name="order_by" class="btn btn-light btn-block dropdown-item" value="Relevance">Relevance</button></li>
            <li><button name="order_by" class="btn btn-light btn-block dropdown-item" value="Label : ASC">Label : ASC</button></li>
            <li><button name="order_by" class="btn btn-light btn-block dropdown-item" value="Label : DESC">Label : DESC</button></li>
            <li><button name="order_by" class="btn btn-light btn-block dropdown-item" value="Text : ASC">Text : ASC</button></li>
            <li><button name="order_by" class="btn btn-light btn-block dropdown-item" value="Text : DECS">Text : DESC</button></li>
          </div>
        </div>
        -->
      </div>

    </form>


    {% for result in result_list %}
      <div class="border ml-5 px-3 pt-3 col-8 col-md-10">
        <div class="h3 font-weight-bolder ">
          {{ result.label }}
        </div>
        <div class="">
          <a name="{{ result.id }}" class="button_url btn btn-primary" role="button" target="_blank" href="{{ result.url }}">Link</a>
          <button name="{{ result.id }}" type="button" class="button_fav btn btn-outline-success btn-sm">â˜†</button>
        </div>
        <div class="m-3">
          {{ result.text | linebreaksbr}}
        </div>
        <div>    
          <div class="m-1"><strong>Relevance : </strong><span class="text-muted">{{ result.relevance }}</span></div>
          <div class="m-1"><strong>File : </strong><span class="text-muted">{{ result.filename }} {{ result.line_no }}</span></div>
        </div>
      </div>
    {% endfor %}


  </div>

</div>
{% endblock %}